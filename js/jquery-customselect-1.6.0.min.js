/*!
 * jQuery Custom Select Plugin 1.6.0
 * 2013-08-08
 *
 * http://www.blissmedia.com.au/
 *
 * Copyright 2013 Bliss Media
 * Released under the MIT license:
 *   http://www.opensource.org/licenses/mit-license.php
 */
 !function(a){a.fn.customselect=function(b,c){var d={csclass:"custom-select",search:!0,numitems:4,searchblank:!1,showblank:!0,searchvalue:!1,hoveropen:!1,emptytext:"",mobilecheck:function(){return navigator.platform&&navigator.userAgent.match(/(android|iphone|ipad|blackberry)/i)}},e="function"==typeof d.mobilecheck?d.mobilecheck.call():d.mobilecheck,f=e?a(this).filter("select"):a(this).filter("select:not([multiple])");return f.each(function(){var f=a(this);f.data("cs-options")&&a.extend(d,f.data("cs-options"));var g=f.parents(d.selector+":first"),h={init:function(){var b={init:function(){b.container(),b.value(),b.subcontainer()},container:function(){g=a("<div/>").addClass(d.csclass),e&&(g.addClass(d.csclass+"-mobile"),f.css("opacity",0)),f.before(g),f.appendTo(g),f.change(function(){h.select(a(this).val())});var b=null;g.hover(function(){b&&clearTimeout(b),g.addClass(d.csclass+"-hover")},function(){d.hoveropen&&(b=setTimeout(h.close,750)),g.removeClass(d.csclass+"-hover")}),a(document).mouseup(function(){g.is(d.selector+"-hover")?g.find("input").focus():h.close()})},value:function(){var b=a("<a href='#'/>").appendTo(g);f.appendTo(g);var c=f.find("option:selected").text();b.html(c.length>0?c:d.emptytext).click(function(a){a.preventDefault()}).focus(function(){g.addClass(d.csclass+"-focus")}).blur(function(){g.removeClass(d.csclass+"-focus")}),d.hoveropen?b.mouseover(h.open):b.click(h.toggle)},subcontainer:function(){var b=a("<div/>").appendTo(g),c=a("<input type='input'/>").appendTo(b);c.keyup(function(b){a.inArray(b.which,[13,38,40])<0&&(d.search?h.search(a(this).val()):(h.searchmove(a(this).val()),a(this).val("")))}).keydown(function(a){switch(a.which){case 13:val=g.find("ul li.active.option-hover").data("value"),h.select(val);break;case 38:h.selectUp();break;case 40:h.selectDown();break;case 27:h.close();break;default:return!0}return a.preventDefault(),!1}).blur(function(){a(this).val("")}),d.search||c.addClass(d.csclass+"-hidden-input");var e=a("<div/>").appendTo(b),i=a("<ul/>").appendTo(e);f.find("option").each(function(b){var c=a(this).attr("value"),e=a(this).text();(d.showblank||c.length>0)&&a("<li/>",{"class":"active"+(0==b?" option-hover":""),"data-value":c,text:e.length>0?e:d.emptytext}).appendTo(i)});var j=i.find("li");i.find("li").click(function(){h.select(a(this).data("value"))}),g.find("div div").css({"overflow-y":j.length>d.numitems?"scroll":"visible"}),a("<li/>",{"class":"no-results",text:"No results"}).appendTo(i)}};f.is("select"+d.selector)&&b.init()},toggle:function(){g.is(d.selector+"-open")?h.close():h.open()},open:function(){e||(g.addClass(d.csclass+"-open"),g.find("input").focus(),g.find("ul li.no-results").hide(),h._selectMove(f[0].selectedIndex))},close:function(){g.removeClass(d.csclass+"-open"),g.find("input").val("").blur(),g.find("ul li").not(".no-results").addClass("active");var a=g.find("ul li").not(".no-results");g.find("div div").css({"overflow-y":a.length>d.numitems?"scroll":"visible"})},search:function(b){b=a.trim(b.toLowerCase());var c=g.find("ul li.no-results").hide(),e=g.find("ul li").not(".no-results");e.each(function(){var c=(a(this).text()+"").toLowerCase(),e=(a(this).data("value")+"").toLowerCase(),f=!1;d.searchblank||e.length>0?d.searchvalue&&e.indexOf(b)>=0?f=!0:c.indexOf(b)>=0&&(f=!0):0==b.length&&(f=!0),f?a(this).addClass("active"):a(this).removeClass("active")}),e=e.filter(".active").filter(":visible"),g.find("div div").css({"overflow-y":e.length>d.numitems?"scroll":"visible"}),e.length>0?h._selectMove(0):c.show()},searchmove:function(b){var c=[];f.find("option").each(function(d){0==a(this).text().indexOf(b)&&c.push(d)}),c.length>0&&h._selectMove(c[0])},select:function(a){f.val()!=a&&f.val(a).change();var b=f.find("option:selected").text();g.find("a").text(b.length>0?b:d.emptytext),h.close()},selectUp:function(){var a=g.find("ul li.active").not(".no-results"),b=a.index(a.filter(".option-hover")),c=b-1;c=0>c?a.length-1:c,h._selectMove(c)},selectDown:function(){var a=g.find("ul li.active").not(".no-results"),b=a.index(a.filter(".option-hover")),c=b+1;c=c>a.length-1?0:c,h._selectMove(c)},_selectMove:function(a){var b=g.find("ul li.active");b.removeClass("option-hover").eq(a).addClass("option-hover");var c=g.find("div div");"scroll"==c.css("overflow-y")&&(c.scrollTop(0),a+1>d.numitems&&(offset=b.eq(a+1-d.numitems).offset().top-c.offset().top,a==f.find("option").length-1&&(offset=c.find("ul").height()),c.scrollTop(offset)))},destroy:function(){f.data("cs-options")&&(f.removeData("cs-options").insertAfter(g),g.remove())}},i=b;i&&"object"==typeof i&&(a.extend(d,i),i="init",c=null),d.selector="."+d.csclass,i=i?i:"init","function"==typeof h[i]&&h[i].call(this,c),f.data("cs-options",d)}),this}}(jQuery);